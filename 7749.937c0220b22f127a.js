"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7749],{7749:(T,b,a)=>{a.r(b),a.d(b,{ScheduleDetailsPageModule:()=>O});var h=a(2881),u=a(9417),s=a(3092),f=a(5207),e=a(1360),D=a(1678),m=a(1413),r=a(6977),g=a(7483),p=a(3136),R=a(6697);function k(c,l){if(1&c){const t=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Dose"),e.k0s(),e.j41(4,"ion-buttons",5)(5,"ion-button",1),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return n.isModalOpen=!n.isModalOpen,e.Njj(n.isNew=!0)}),e.nrm(6,"ion-icon",6),e.k0s()(),e.j41(7,"ion-buttons",7)(8,"ion-button",8),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.save())}),e.nrm(9,"ion-icon",9),e.k0s()()()(),e.j41(10,"ion-content",10)(11,"ion-card")(12,"ion-card-content")(13,"ion-grid")(14,"ion-row")(15,"ion-col")(16,"ion-item")(17,"ion-checkbox",11),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o._dose.intervalFromDose,n)||(o._dose.intervalFromDose=n),e.Njj(n)}),e.EFF(18,"Dose Interval"),e.k0s()()(),e.j41(19,"ion-col")(20,"ion-item",12)(21,"ion-input",13),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o._dose.doseNumber,n)||(o._dose.doseNumber=n),e.Njj(n)}),e.k0s()()()(),e.j41(22,"ion-row")(23,"ion-col")(24,"ion-item")(25,"ion-input",14),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o._dose.minAge,n)||(o._dose.minAge=n),e.Njj(n)}),e.k0s()()(),e.j41(26,"ion-col")(27,"ion-item")(28,"ion-input",15),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o._dose.recAge,n)||(o._dose.recAge=n),e.Njj(n)}),e.k0s()()()(),e.j41(29,"ion-row")(30,"ion-col")(31,"ion-item")(32,"ion-input",16),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o._dose.minSpacing,n)||(o._dose.minSpacing=n),e.Njj(n)}),e.k0s()()(),e.j41(33,"ion-col")(34,"ion-item")(35,"ion-input",17),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o._dose.recSpacing,n)||(o._dose.recSpacing=n),e.Njj(n)}),e.k0s()()()(),e.j41(36,"ion-row")(37,"ion-col")(38,"ion-item")(39,"ion-checkbox",11),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o._dose.isBooster,n)||(o._dose.isBooster=n),e.Njj(n)}),e.EFF(40,"Booster"),e.k0s()()(),e.j41(41,"ion-col")(42,"ion-item",12)(43,"ion-input",18),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o._dose.boosterSpacing,n)||(o._dose.boosterSpacing=n),e.Njj(n)}),e.k0s()()()(),e.j41(44,"ion-row")(45,"ion-col")(46,"ion-item")(47,"ion-checkbox",11),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o._dose.isPregnancy,n)||(o._dose.isPregnancy=n),e.Njj(n)}),e.EFF(48,"Safe for Pregnancy"),e.k0s()()(),e.j41(49,"ion-col")(50,"ion-item",12)(51,"ion-input",19),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o._dose.weeks,n)||(o._dose.weeks=n),e.Njj(n)}),e.k0s()()()()()()()()}if(2&c){const t=e.XpG();e.R7$(8),e.Y8G("disabled",!t.isDoseValid()),e.R7$(9),e.R50("ngModel",t._dose.intervalFromDose),e.R7$(3),e.Y8G("disabled",!t._dose.intervalFromDose),e.R7$(),e.R50("ngModel",t._dose.doseNumber),e.R7$(4),e.R50("ngModel",t._dose.minAge),e.R7$(3),e.R50("ngModel",t._dose.recAge),e.R7$(4),e.R50("ngModel",t._dose.minSpacing),e.R7$(3),e.R50("ngModel",t._dose.recSpacing),e.R7$(4),e.R50("ngModel",t._dose.isBooster),e.R7$(3),e.Y8G("disabled",!t._dose.isBooster),e.R7$(),e.R50("ngModel",t._dose.boosterSpacing),e.R7$(4),e.R50("ngModel",t._dose.isPregnancy),e.R7$(3),e.Y8G("disabled",!t._dose.isPregnancy),e.R7$(),e.R50("ngModel",t._dose.weeks)}}function F(c,l){if(1&c){const t=e.RV6();e.j41(0,"ion-item-sliding")(1,"ion-item",20),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return o._dose=n,o.isModalOpen=!0,e.Njj(o.isNew=!1)}),e.j41(2,"ion-label",5)(3,"h2"),e.EFF(4,"Dose Number: "),e.j41(5,"strong"),e.EFF(6),e.k0s()(),e.j41(7,"h2"),e.EFF(8,"Age: Min: "),e.j41(9,"strong")(10,"ion-text",21),e.EFF(11),e.k0s()(),e.EFF(12,", Recommended: "),e.j41(13,"strong")(14,"ion-text",21),e.EFF(15),e.k0s()()(),e.j41(16,"h2"),e.EFF(17,"Spacing: Min: "),e.j41(18,"strong")(19,"ion-text",21),e.EFF(20),e.k0s()(),e.EFF(21,", Recommended: "),e.j41(22,"strong")(23,"ion-text",21),e.EFF(24),e.k0s()()(),e.j41(25,"h2"),e.EFF(26,"Booster: "),e.j41(27,"strong")(28,"ion-text",22),e.EFF(29),e.k0s()()(),e.j41(30,"h2"),e.EFF(31,"Safe for Pregnancy: "),e.j41(32,"strong")(33,"ion-text",22),e.EFF(34),e.k0s()()()()(),e.j41(35,"ion-item-options",23)(36,"ion-item-option",24),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.deleteDose(n))}),e.nrm(37,"ion-icon",25),e.k0s()()()}if(2&c){const t=l.$implicit;e.R7$(6),e.JRh(t.doseNumber),e.R7$(5),e.JRh(t.minAge),e.R7$(4),e.JRh(t.recAge),e.R7$(5),e.JRh(t.minSpacing),e.R7$(4),e.JRh(t.recSpacing),e.R7$(4),e.Y8G("color",t.isBooster?"success":"danger"),e.R7$(),e.JRh(t.isBooster?"Yes":"No"),e.R7$(4),e.Y8G("color",t.isPregnancy?"success":"danger"),e.R7$(),e.JRh(t.isPregnancy?"Yes":"No")}}let j=(()=>{var c;class l{constructor(i,n,o){this._chageDetectorRef=i,this._scheduleService=n,this._uiService=o,this.isModalOpen=!1,this.isNew=!0,this._unsubscribeAll=new m.B}ngOnInit(){console.log(this.schedule),this.resetDose()}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}get individualDoses(){return(this.schedule.vaccines||[]).filter(i=>"doseNumber"in i)}save(){this._dose.scheduleId=this.schedule.id;const i=()=>{this._scheduleService.getDoses(this.schedule.id).pipe((0,R.s)(1)).subscribe(n=>{this.schedule=n,this.resetDose(),this.isModalOpen=!1,this.isNew=!0,this._chageDetectorRef.markForCheck()})};this.isNew?this._scheduleService.addDose(this._dose).subscribe(()=>{this._uiService.toast("Dose added to vaccine schedule"),i()}):this._scheduleService.updateDose(this._dose).subscribe(()=>{this._uiService.toast("Dose updated"),i()})}isDoseValid(){return""!==this._dose.minSpacing.trim()&&""!==this._dose.recSpacing.trim()&&""!==this._dose.minAge.trim()&&""!==this._dose.recAge.trim()}deleteDose(i){this._scheduleService.deleteDose(i.id).pipe((0,r.Q)(this._unsubscribeAll)).subscribe(()=>{this.schedule.vaccines=(this.schedule.vaccines||[]).filter(n=>n.id!==i.id),this._uiService.toast("Dose deleted"),this._chageDetectorRef.markForCheck()})}resetDose(){this._dose={scheduleId:this.schedule.id||0,doseNumber:this.individualDoses.length+1,minAge:"0w",recAge:"0w",minSpacing:"0w",recSpacing:"0w",isBooster:!1,boosterSpacing:"0w",isPregnancy:!1,weeks:"0w",intervalFromDose:!1}}}return(c=l).\u0275fac=function(i){return new(i||c)(e.rXU(e.gRc),e.rXU(g.l),e.rXU(p.o))},c.\u0275cmp=e.VBU({type:c,selectors:[["app-individual"]],inputs:{schedule:"schedule"},standalone:!1,decls:7,vars:2,consts:[["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"],[3,"willDismiss","isOpen"],[4,"ngFor","ngForOf"],["slot","start"],["name","close","color","primary","slot","icon-only"],["slot","end"],[3,"click","disabled"],["name","checkmark","slot","icon-only","color","primary"],[1,"ion-padding"],["justify","space-between",3,"ngModelChange","ngModel"],[3,"disabled"],["placeholder","Dose number","type","number",3,"ngModelChange","ngModel"],["label","Minimum Age","labelPlacement","floating",3,"ngModelChange","ngModel"],["label","Recommended Age","labelPlacement","floating",3,"ngModelChange","ngModel"],["label","Minimum Spacing","labelPlacement","floating",3,"ngModelChange","ngModel"],["label","Recommended Spacing","labelPlacement","floating",3,"ngModelChange","ngModel"],["placeholder","Booster Spacing",3,"ngModelChange","ngModel"],["placeholder","Weeks",3,"ngModelChange","ngModel"],["lines","full","detail","true","button","true",3,"click"],["color","primary"],[3,"color"],["side","start"],["color","danger",3,"click"],["slot","icon-only","name","trash"]],template:function(i,n){1&i&&(e.j41(0,"ion-fab",0)(1,"ion-fab-button",1),e.bIt("click",function(){return n.isModalOpen=!n.isModalOpen}),e.nrm(2,"ion-icon",2),e.k0s()(),e.j41(3,"ion-modal",3),e.bIt("willDismiss",function(){return n.isNew=!0,n.isModalOpen=!1}),e.DNE(4,k,52,14,"ng-template"),e.k0s(),e.j41(5,"ion-list"),e.DNE(6,F,38,9,"ion-item-sliding",4),e.k0s()),2&i&&(e.R7$(3),e.Y8G("isOpen",n.isModalOpen),e.R7$(3),e.Y8G("ngForOf",n.individualDoses))},dependencies:[h.Sq,u.BC,u.vS,s.Jm,s.QW,s.b_,s.I9,s.eY,s.hU,s.W9,s.Q8,s.YW,s.lO,s.eU,s.iq,s.$w,s.uz,s.LU,s.CE,s.A7,s.he,s.nf,s.ln,s.IO,s.BC,s.ai,s.Sb,s.hB,s.su,s.Gw],encapsulation:2,changeDetection:0}),l})();var C=a(467),M=a(1870);function v(c,l){if(1&c){const t=e.RV6();e.j41(0,"ion-item-sliding")(1,"ion-item",4)(2,"ion-label",5)(3,"h2"),e.EFF(4,"Vaccine: "),e.j41(5,"strong"),e.EFF(6),e.k0s()(),e.j41(7,"h2"),e.EFF(8,"Dose Number: "),e.j41(9,"strong"),e.EFF(10),e.k0s()(),e.j41(11,"h2"),e.EFF(12,"Age: Min: "),e.j41(13,"strong")(14,"ion-text",6),e.EFF(15),e.k0s()(),e.EFF(16,", Recommended: "),e.j41(17,"strong")(18,"ion-text",6),e.EFF(19),e.k0s()()(),e.j41(20,"h2"),e.EFF(21,"Spacing: Min: "),e.j41(22,"strong")(23,"ion-text",6),e.EFF(24),e.k0s()(),e.EFF(25,", Recommended: "),e.j41(26,"strong")(27,"ion-text",6),e.EFF(28),e.k0s()()(),e.j41(29,"h2"),e.EFF(30,"Booster: "),e.j41(31,"strong")(32,"ion-text",7),e.EFF(33),e.k0s()()(),e.j41(34,"h2"),e.EFF(35,"Safe for Pregnancy: "),e.j41(36,"strong")(37,"ion-text",7),e.EFF(38),e.k0s()()()()(),e.j41(39,"ion-item-options",8)(40,"ion-item-option",9),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.deleteDose(n))}),e.nrm(41,"ion-icon",10),e.k0s()()()}if(2&c){const t=l.$implicit;e.R7$(6),e.Lme("",t.vaccineName," (",t.tradeName,")"),e.R7$(4),e.JRh(t.doseNumber),e.R7$(5),e.JRh(t.minAge),e.R7$(4),e.JRh(t.recAge),e.R7$(5),e.JRh(t.minSpacing),e.R7$(4),e.JRh(t.recSpacing),e.R7$(4),e.Y8G("color",t.isBooster?"success":"danger"),e.R7$(),e.JRh(t.isBooster?"Yes":"No"),e.R7$(4),e.Y8G("color",t.isPregnancy?"success":"danger"),e.R7$(),e.JRh(t.isPregnancy?"Yes":"No")}}let S=(()=>{var c;class l{constructor(i,n,o,d,_){this._chageDetectorRef=i,this._modalCtrl=n,this._scheduleService=o,this._alertCtrl=d,this._uiService=_,this._unsubscribeAll=new m.B,this.recommended={vaccine_id:0,schedule_id:0,v_ScheduleId:0}}ngOnInit(){this.getVaccineDoses()}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getVaccineDoses(){this._scheduleService.getRecommendedSchedule(this.schedule.id||0).pipe((0,r.Q)(this._unsubscribeAll)).subscribe(i=>{console.log(i),this.lstDoses=i,console.log(this.lstDoses),this._chageDetectorRef.markForCheck()})}selectVaccine(){var i=this;return(0,C.A)(function*(){const n=yield i._modalCtrl.create({component:M.o});n.present();const{data:o}=yield n.onWillDismiss();console.log(o),i.loadDoses(o),i._chageDetectorRef.markForCheck()})()}loadDoses(i){this.recommended.vaccine_id=i.id,this.recommended.schedule_id=this.schedule.id||0,this._scheduleService.getVaccineDoses(i.id).pipe((0,r.Q)(this._unsubscribeAll)).subscribe(n=>{console.log(n),n?n.length>1?this.chooseDose(n):(console.log(n),this.recommended.v_ScheduleId=n[0].id,this._scheduleService.addRecommendedSchedule(this.recommended).subscribe(()=>{this._uiService.toast("Dose added to vaccine schedule"),this.getVaccineDoses(),this._chageDetectorRef.markForCheck()})):console.log("Vaccine doesnt have schedules yet"),this._chageDetectorRef.markForCheck()})}chooseDose(i){var n=this;return(0,C.A)(function*(){yield(yield n._alertCtrl.create({header:"Select dose",inputs:i.map((d,_)=>({type:"radio",label:`Dose ${d.doseNumber}`,value:d,checked:0===_})),buttons:[{text:"Cancel",role:"cancel"},{text:"Select",handler:d=>{n.recommended.v_ScheduleId=d.id||0,n._scheduleService.addRecommendedSchedule(n.recommended).subscribe(()=>{n._uiService.toast("Dose added to vaccine schedule"),n.getVaccineDoses(),n._chageDetectorRef.markForCheck()})}}]})).present()})()}deleteDose(i){console.log(i.recommended_id),this._scheduleService.deleteRecommendedSchedule(i.recommended_id).pipe((0,r.Q)(this._unsubscribeAll)).subscribe(()=>{this._uiService.toast("Dose deleted"),this.getVaccineDoses(),this._chageDetectorRef.markForCheck()})}}return(c=l).\u0275fac=function(i){return new(i||c)(e.rXU(e.gRc),e.rXU(s.W3),e.rXU(g.l),e.rXU(s.hG),e.rXU(p.o))},c.\u0275cmp=e.VBU({type:c,selectors:[["app-recommended"]],inputs:{schedule:"schedule"},standalone:!1,decls:5,vars:1,consts:[["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"],[4,"ngFor","ngForOf"],["lines","full","detail","true","button","true"],["slot","start"],["color","primary"],[3,"color"],["side","start"],["color","danger",3,"click"],["slot","icon-only","name","trash"]],template:function(i,n){1&i&&(e.j41(0,"ion-fab",0)(1,"ion-fab-button",1),e.bIt("click",function(){return n.selectVaccine()}),e.nrm(2,"ion-icon",2),e.k0s()(),e.j41(3,"ion-list"),e.DNE(4,v,42,11,"ion-item-sliding",3),e.k0s()),2&i&&(e.R7$(4),e.Y8G("ngForOf",n.lstDoses))},dependencies:[h.Sq,s.Q8,s.YW,s.iq,s.uz,s.LU,s.CE,s.A7,s.he,s.nf,s.IO],encapsulation:2,changeDetection:0}),l})();function x(c,l){if(1&c){const t=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Catch up"),e.k0s(),e.j41(4,"ion-buttons",5)(5,"ion-button",1),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return n.isModalOpen=!n.isModalOpen,e.Njj(n.isNew=!0)}),e.nrm(6,"ion-icon",6),e.k0s()(),e.j41(7,"ion-buttons",7)(8,"ion-button",1),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return n.save(),n.isModalOpen=!n.isModalOpen,e.Njj(n.isNew=!0)}),e.nrm(9,"ion-icon",8),e.k0s()()()(),e.j41(10,"ion-content",9)(11,"ion-card")(12,"ion-card-content")(13,"ion-grid")(14,"ion-row")(15,"ion-col")(16,"ion-item")(17,"ion-input",10),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.catchUp.minAge,n)||(o.catchUp.minAge=n),e.Njj(n)}),e.k0s()()(),e.j41(18,"ion-col")(19,"ion-item")(20,"ion-input",11),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.catchUp.maxAge,n)||(o.catchUp.maxAge=n),e.Njj(n)}),e.k0s()()(),e.j41(21,"ion-col")(22,"ion-item")(23,"ion-input",12),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.catchUp.dosesGiven,n)||(o.catchUp.dosesGiven=n),e.Njj(n)}),e.k0s()()()(),e.j41(24,"ion-row")(25,"ion-col")(26,"ion-item")(27,"ion-input",13),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.catchUp.ageReceivedSpacing,n)||(o.catchUp.ageReceivedSpacing=n),e.Njj(n)}),e.k0s()()(),e.j41(28,"ion-col")(29,"ion-item")(30,"ion-input",14),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.catchUp.dosesGiveBeforeAge,n)||(o.catchUp.dosesGiveBeforeAge=n),e.Njj(n)}),e.k0s()()(),e.j41(31,"ion-col")(32,"ion-item")(33,"ion-input",15),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.catchUp.anyDoseAtOrAfterAge,n)||(o.catchUp.anyDoseAtOrAfterAge=n),e.Njj(n)}),e.k0s()()()(),e.j41(34,"ion-row")(35,"ion-col")(36,"ion-item")(37,"ion-input",16),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.catchUp.nextDose.doseNumber,n)||(o.catchUp.nextDose.doseNumber=n),e.Njj(n)}),e.k0s()()(),e.j41(38,"ion-col")(39,"ion-item")(40,"ion-input",17),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.catchUp.nextDose.minIntervalWeeks,n)||(o.catchUp.nextDose.minIntervalWeeks=n),e.Njj(n)}),e.k0s()()(),e.j41(41,"ion-col")(42,"ion-item")(43,"ion-input",18),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.catchUp.nextDose.minAgeMonths,n)||(o.catchUp.nextDose.minAgeMonths=n),e.Njj(n)}),e.k0s()()()()()()()()}if(2&c){const t=e.XpG();e.R7$(17),e.R50("ngModel",t.catchUp.minAge),e.R7$(3),e.R50("ngModel",t.catchUp.maxAge),e.R7$(3),e.R50("ngModel",t.catchUp.dosesGiven),e.R7$(4),e.R50("ngModel",t.catchUp.ageReceivedSpacing),e.R7$(3),e.R50("ngModel",t.catchUp.dosesGiveBeforeAge),e.R7$(3),e.R50("ngModel",t.catchUp.anyDoseAtOrAfterAge),e.R7$(4),e.R50("ngModel",t.catchUp.nextDose.doseNumber),e.R7$(3),e.R50("ngModel",t.catchUp.nextDose.minIntervalWeeks),e.R7$(3),e.R50("ngModel",t.catchUp.nextDose.minAgeMonths)}}function A(c,l){if(1&c&&(e.j41(0,"h2"),e.EFF(1,"Last Dose Received at: "),e.j41(2,"strong")(3,"ion-text",20),e.EFF(4),e.k0s()()()),2&c){const t=e.XpG().$implicit;e.R7$(4),e.JRh(t.ageReceivedSpacing)}}function I(c,l){if(1&c&&(e.j41(0,"h2"),e.EFF(1,"Doses Received Before: "),e.j41(2,"strong")(3,"ion-text"),e.EFF(4),e.k0s()()()),2&c){const t=e.XpG().$implicit;e.R7$(4),e.JRh(t.dosesGiveBeforeAge)}}function G(c,l){if(1&c&&(e.j41(0,"h2"),e.EFF(1,"Doses Received After: "),e.j41(2,"strong")(3,"ion-text"),e.EFF(4),e.k0s()()()),2&c){const t=e.XpG().$implicit;e.R7$(4),e.JRh(t.anyDoseAtOrAfterAge)}}function N(c,l){if(1&c){const t=e.RV6();e.j41(0,"ion-item-sliding")(1,"ion-item",19),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return o.edit(n),o.isModalOpen=!0,e.Njj(o.isNew=!1)}),e.j41(2,"ion-label",5)(3,"h2")(4,"ion-text",20)(5,"strong"),e.EFF(6,"Doses Received:"),e.k0s()()(),e.j41(7,"h2"),e.EFF(8,"Age Range: "),e.j41(9,"strong"),e.EFF(10),e.k0s()(),e.j41(11,"h2"),e.EFF(12,"Doses Received "),e.j41(13,"strong")(14,"ion-text",20),e.EFF(15),e.k0s()()(),e.DNE(16,A,5,1,"h2",21)(17,I,5,1,"h2",21)(18,G,5,1,"h2",21),e.k0s(),e.j41(19,"ion-label")(20,"h2")(21,"ion-text",20)(22,"strong"),e.EFF(23,"Next Dose:"),e.k0s()()(),e.j41(24,"h2"),e.EFF(25,"Dose Number: "),e.j41(26,"strong")(27,"ion-text",22),e.EFF(28),e.k0s()()(),e.j41(29,"h2"),e.EFF(30,"Minimum Interval: "),e.j41(31,"strong")(32,"ion-text",22),e.EFF(33),e.k0s()()(),e.j41(34,"h2"),e.EFF(35,"Minimum Age: "),e.j41(36,"strong")(37,"ion-text",22),e.EFF(38),e.k0s()()()()(),e.j41(39,"ion-item-options",23)(40,"ion-item-option",24),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.deleteCatchup(n))}),e.nrm(41,"ion-icon",25),e.k0s()()()}if(2&c){const t=l.$implicit;e.R7$(10),e.JRh(t.ageRange),e.R7$(5),e.JRh(t.dosesGiven),e.R7$(),e.Y8G("ngIf",t.ageReceivedSpacing),e.R7$(),e.Y8G("ngIf",t.dosesGiveBeforeAge),e.R7$(),e.Y8G("ngIf",t.anyDoseAtOrAfterAge),e.R7$(10),e.JRh(t.n_doseNumber),e.R7$(5),e.JRh(t.n_minIntervalWeeks),e.R7$(5),e.JRh(t.n_minAgeMonths)}}let U=(()=>{var c;class l{constructor(i,n,o){this._scheduleService=i,this._chageDetectorRef=n,this._uiService=o,this.isModalOpen=!1,this.isNew=!1,this.catchUp={ageRange:"0w",minAge:"0w",maxAge:"0w",dosesGiven:0,ageReceivedSpacing:"",dosesGiveBeforeAge:"",anyDoseAtOrAfterAge:"",nextDose:{doseNumber:0,minIntervalWeeks:"0w",minAgeMonths:"0w"}},this._unsubscribeAll=new m.B}ngOnInit(){this.getCatchups()}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getCatchups(){this._scheduleService.getCatchupSchedules(this.schedule.id||0).pipe((0,r.Q)(this._unsubscribeAll)).subscribe(i=>{this.schedule.vaccines=i,console.log(this.schedule.vaccines),this.catchUp.scheduleId=this.schedule.id,this._chageDetectorRef.markForCheck()})}save(){this.catchUp.ageRange=`${this.catchUp.minAge} - ${this.catchUp.maxAge}`,this.isNew?this._scheduleService.addCatchUp(this.catchUp).pipe((0,r.Q)(this._unsubscribeAll)).subscribe(()=>{this.getCatchups(),this.resetCatchUp(),this._uiService.toast("Catch Up added"),this._chageDetectorRef.markForCheck()}):this._scheduleService.updateCatchUp(this.catchUp).pipe((0,r.Q)(this._unsubscribeAll)).subscribe(()=>{this.resetCatchUp(),this.getCatchups(),this._uiService.toast("Catchup updated"),this._chageDetectorRef.markForCheck()}),this.resetCatchUp()}deleteCatchup(i){console.log(i),this._scheduleService.deleteCatchUp(i.id).pipe((0,r.Q)(this._unsubscribeAll)).subscribe(()=>{this._uiService.toast("Catch Up deleted"),this.getCatchups(),this._chageDetectorRef.markForCheck()})}resetCatchUp(){this.catchUp={ageRange:"0w",minAge:"0w",maxAge:"0w",dosesGiven:0,ageReceivedSpacing:"",dosesGiveBeforeAge:"",anyDoseAtOrAfterAge:"",nextDose:{doseNumber:0,minIntervalWeeks:"0w",minAgeMonths:"0w"}}}edit(i){this.catchUp={...i,nextDose:{doseNumber:i.n_doseNumber,minIntervalWeeks:i.n_minIntervalWeeks,minAgeMonths:i.n_minAgeMonths}}}}return(c=l).\u0275fac=function(i){return new(i||c)(e.rXU(g.l),e.rXU(e.gRc),e.rXU(p.o))},c.\u0275cmp=e.VBU({type:c,selectors:[["app-catchup"]],inputs:{schedule:"schedule"},standalone:!1,decls:7,vars:2,consts:[["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"],[3,"willDismiss","isOpen"],[4,"ngFor","ngForOf"],["slot","start"],["name","close","color","primary","slot","icon-only"],["slot","end"],["name","checkmark","slot","icon-only","color","primary"],[1,"ion-padding"],["label","Minimum Age","labelPlacement","floating",3,"ngModelChange","ngModel"],["label","Maximum Age","labelPlacement","floating",3,"ngModelChange","ngModel"],["label","Doses Received","labelPlacement","floating","type","number",3,"ngModelChange","ngModel"],["label","Last Dose?","placeholder","6m","labelPlacement","floating",3,"ngModelChange","ngModel"],["label","All doses before?","labelPlacement","floating",3,"ngModelChange","ngModel"],["label","Any dose after?","labelPlacement","floating",3,"ngModelChange","ngModel"],["label","Next dose number","labelPlacement","floating","type","number",3,"ngModelChange","ngModel"],["label","Minimun Interval","labelPlacement","floating",3,"ngModelChange","ngModel"],["label","Age for next dose","labelPlacement","floating",3,"ngModelChange","ngModel"],["lines","full","detail","true","button","true",3,"click"],["color","primary"],[4,"ngIf"],["color","success"],["side","start"],["color","danger",3,"click"],["slot","icon-only","name","trash"]],template:function(i,n){1&i&&(e.j41(0,"ion-fab",0)(1,"ion-fab-button",1),e.bIt("click",function(){return n.isModalOpen=!n.isModalOpen,n.isNew=!0}),e.nrm(2,"ion-icon",2),e.k0s()(),e.j41(3,"ion-modal",3),e.bIt("willDismiss",function(){return n.isNew=!0,n.isModalOpen=!1}),e.DNE(4,x,44,9,"ng-template"),e.k0s(),e.j41(5,"ion-list"),e.DNE(6,N,42,8,"ion-item-sliding",4),e.k0s()),2&i&&(e.R7$(3),e.Y8G("isOpen",n.isModalOpen),e.R7$(3),e.Y8G("ngForOf",n.schedule.vaccines))},dependencies:[h.Sq,h.bT,u.BC,u.vS,s.Jm,s.QW,s.b_,s.I9,s.hU,s.W9,s.Q8,s.YW,s.lO,s.eU,s.iq,s.$w,s.uz,s.LU,s.CE,s.A7,s.he,s.nf,s.ln,s.IO,s.BC,s.ai,s.Sb,s.su,s.Gw],encapsulation:2,changeDetection:0}),l})();const w=()=>["/schedules"];function y(c,l){if(1&c&&e.nrm(0,"app-individual",7),2&c){const t=e.XpG();e.Y8G("schedule",t.schedule)}}function B(c,l){if(1&c&&e.nrm(0,"app-recommended",7),2&c){const t=e.XpG();e.Y8G("schedule",t.schedule)}}function E(c,l){if(1&c&&e.nrm(0,"app-catchup",7),2&c){const t=e.XpG();e.Y8G("schedule",t.schedule)}}const X=[{path:":id",component:(()=>{var c;class l{constructor(i,n,o,d,_){this._chageDetectorRef=i,this._scheduleService=n,this._uiService=o,this._modalCtrl=d,this._alertCtrl=_,this.activateRoute=(0,e.WQX)(D.nX),this._dose={scheduleId:0,doseNumber:0,intervalFromDose:!1,minAge:"",recAge:"",minSpacing:"",recSpacing:"",isBooster:!1,boosterSpacing:"0w",isPregnancy:!1,weeks:"0w"},this.scheduleId=0,this.isModalOpen=!1,this._unsubscribeAll=new m.B,this.isNew=!0,this.lstDoses=[],this.section="",this.schedule={name:"",section:"",vaccines:this.lstDoses||[]}}ngOnInit(){this.scheduleId=parseInt(this.activateRoute.snapshot.paramMap.get("id")),this._scheduleService.getDoses(this.scheduleId).pipe((0,r.Q)(this._unsubscribeAll)).subscribe(i=>{this.schedule=i,this._chageDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}isDoseValid(){return""!==this._dose.minSpacing.trim()&&""!==this._dose.recSpacing.trim()&&""!==this._dose.minAge.trim()&&""!==this._dose.recAge.trim()}save(){this._dose.scheduleId=this.scheduleId,this.isNew?this._scheduleService.addDose(this._dose).subscribe(()=>{this._uiService.toast("Dose added to vaccine schedule"),this.resetDose(),this._chageDetectorRef.markForCheck()}):this._scheduleService.updateDose(this._dose).subscribe(()=>{this._uiService.toast("Dose updated"),this.resetDose(),this._chageDetectorRef.markForCheck()}),this.resetDose(),this.isModalOpen=!1,this._chageDetectorRef.markForCheck()}deleteDose(i){this._scheduleService.deleteDose(i.id||0).pipe((0,r.Q)(this._unsubscribeAll)).subscribe(()=>{let n=this.lstDoses.findIndex(o=>o.id===i.id);this.lstDoses.splice(n,1),this._uiService.toast("Dose deleted from schedule"),this._chageDetectorRef.markForCheck()})}resetDose(){this._dose={scheduleId:this.scheduleId,doseNumber:this.lstDoses.length+1,minAge:"0w",recAge:"0w",minSpacing:"0w",recSpacing:"0w",isBooster:!1,boosterSpacing:"0w",isPregnancy:!1,weeks:"0w",intervalFromDose:!1}}}return(c=l).\u0275fac=function(i){return new(i||c)(e.rXU(e.gRc),e.rXU(g.l),e.rXU(p.o),e.rXU(s.W3),e.rXU(s.hG))},c.\u0275cmp=e.VBU({type:c,selectors:[["app-schedule-details"]],standalone:!1,decls:12,vars:8,consts:[[3,"translucent"],["slot","start"],[3,"routerLink"],["name","arrow-back","slot","icon-only","color","primary"],[3,"fullscreen"],[3,"ngSwitch"],[3,"schedule",4,"ngSwitchCase"],[3,"schedule"]],template:function(i,n){1&i&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.nrm(4,"ion-icon",3),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6,"Vaccine Schedule"),e.k0s()()(),e.j41(7,"ion-content",4),e.qex(8,5),e.DNE(9,y,1,1,"app-individual",6)(10,B,1,1,"app-recommended",6)(11,E,1,1,"app-catchup",6),e.bVm(),e.k0s()),2&i&&(e.Y8G("translucent",!0),e.R7$(3),e.Y8G("routerLink",e.lJ4(7,w)),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("ngSwitch",n.schedule.section),e.R7$(),e.Y8G("ngSwitchCase","individual"),e.R7$(),e.Y8G("ngSwitchCase","recommended"),e.R7$(),e.Y8G("ngSwitchCase","catchup"))},dependencies:[h.ux,h.e1,s.Jm,s.QW,s.W9,s.eU,s.iq,s.BC,s.ai,s.N7,f.Wk,j,S,U],encapsulation:2,changeDetection:0}),l})()}];let V=(()=>{var c;class l{}return(c=l).\u0275fac=function(i){return new(i||c)},c.\u0275mod=e.$C({type:c}),c.\u0275inj=e.G2t({imports:[f.iI.forChild(X),f.iI]}),l})(),O=(()=>{var c;class l{}return(c=l).\u0275fac=function(i){return new(i||c)},c.\u0275mod=e.$C({type:c}),c.\u0275inj=e.G2t({imports:[h.MD,u.YN,s.bv,V]}),l})()}}]);
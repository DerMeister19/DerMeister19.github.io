"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1485],{1485:(M,v,c)=>{c.r(v),c.d(v,{SchedulesPageModule:()=>j});var r=c(2881),h=c(9417),s=c(3092),m=c(5207),g=c(467),C=c(1413),S=c(6977),b=c(1870),e=c(1360),P=c(7483),y=c(3136);const D=n=>["/schedules/scheduleDetails",n];function F(n,a){if(1&n){const o=e.RV6();e.j41(0,"ion-item-sliding")(1,"ion-item",10)(2,"ion-label")(3,"h2"),e.EFF(4,"Schedule: "),e.j41(5,"strong"),e.EFF(6),e.k0s()()()(),e.j41(7,"ion-item-options",11)(8,"ion-item-option",12),e.bIt("click",function(){const l=e.eBV(o).$implicit,i=e.XpG(2);return e.Njj(i.addSchedule(l))}),e.nrm(9,"ion-icon",13),e.k0s(),e.j41(10,"ion-item-option",14),e.bIt("click",function(){const l=e.eBV(o).$implicit,i=e.XpG(2);return e.Njj(i.deleteSchedule(l))}),e.nrm(11,"ion-icon",15),e.k0s()()()}if(2&n){const o=a.$implicit;e.R7$(),e.Y8G("routerLink",e.eq3(2,D,o.id)),e.R7$(5),e.JRh(o.name)}}function R(n,a){if(1&n&&(e.j41(0,"ion-list"),e.DNE(1,F,12,4,"ion-item-sliding",9),e.k0s()),2&n){const o=e.XpG();e.R7$(),e.Y8G("ngForOf",o.filteredSchedules)}}const _=[{path:"",component:(()=>{var n;class a{constructor(t,l,i,d,u){this._chageDetectorRef=t,this._schedulesService=l,this._alertCtrl=i,this._modalCtrl=d,this._uiService=u,this.lstSchedules=[],this.selectedSegment="recommended",this.schedule={name:"",section:"",vaccineId:0},this._unsubscribeAll=new C.B}ngOnInit(){this.getSchedules()}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}changeSegment(t){this.selectedSegment=t.detail.value,this._chageDetectorRef.markForCheck()}get filteredSchedules(){return this.lstSchedules.filter(t=>t.section===this.selectedSegment)}getSchedules(){this._schedulesService.getSchedules().pipe((0,S.Q)(this._unsubscribeAll)).subscribe(t=>{this.lstSchedules=t,this._chageDetectorRef.markForCheck()})}individualSchedule(){var t=this;return(0,g.A)(function*(){const l=yield t._modalCtrl.create({component:b.o});l.present();const{data:i}=yield l.onDidDismiss();console.log(i),t.schedule.name=`${i.vaccineName} (${i.tradeName})`,t.schedule.vaccineId=i.id,t.addSchedule(void 0,!0),t._chageDetectorRef.markForCheck()})()}addSchedule(t,l){var i=this;return(0,g.A)(function*(){const d=!(null==t||!t.id);yield(yield i._alertCtrl.create({header:d?"Edit Schedule":"Create new Schedule",inputs:[{name:"name",type:"text",value:(null==t?void 0:t.name)||i.schedule.name,disabled:l,placeholder:"Name"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{i.schedule={name:"",section:"",vaccineId:0},i._chageDetectorRef.markForCheck()}},{text:d?"Update":"Create",handler:f=>{const p={id:null==t?void 0:t.id,name:f.name,vaccineId:i.schedule.vaccineId,section:(null==t?void 0:t.section)||i.selectedSegment};(d?i._schedulesService.updateSchedule(p):i._schedulesService.addVaccinationSchedule(p)).pipe((0,S.Q)(i._unsubscribeAll)).subscribe(()=>{i._uiService.toast(`Schedule ${f.name} ${d?"updated":"added"} successfully`),i.getSchedules()})}}]})).present()})()}deleteSchedule(t){var l=this;return(0,g.A)(function*(){(yield l._alertCtrl.create({header:"Delete schedule",message:"Delete vaccination schedule",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Delete",handler:()=>{l._schedulesService.deleteSchedule(t.id||0).pipe((0,S.Q)(l._unsubscribeAll)).subscribe(()=>{let d=l.lstSchedules.findIndex(u=>u.id===t.id);l.lstSchedules.splice(d,1),l._uiService.toast("Schedule deleted successfully"),l._chageDetectorRef.markForCheck()})}}]})).present()})()}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(e.gRc),e.rXU(P.l),e.rXU(s.hG),e.rXU(s.W3),e.rXU(y.o))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-schedules"]],standalone:!1,decls:17,vars:4,consts:[[3,"translucent"],[3,"ngModelChange","ionChange","ngModel"],["value","recommended"],["value","individual"],[3,"fullscreen"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"],[4,"ngFor","ngForOf"],["lines","full","detail","true","button","true",3,"routerLink"],["side","start"],["color","primary",3,"click"],["slot","icon-only","name","pencil"],["color","danger",3,"click"],["slot","icon-only","name","trash"]],template:function(t,l){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Schedules"),e.k0s()(),e.j41(4,"ion-toolbar")(5,"ion-segment",1),e.mxI("ngModelChange",function(d){return e.DH7(l.selectedSegment,d)||(l.selectedSegment=d),d}),e.bIt("ionChange",function(d){return l.changeSegment(d)}),e.j41(6,"ion-segment-button",2)(7,"ion-label"),e.EFF(8,"Recommended"),e.k0s()(),e.j41(9,"ion-segment-button",3)(10,"ion-label"),e.EFF(11,"Individual"),e.k0s()()()()(),e.j41(12,"ion-content",4),e.DNE(13,R,2,1,"ion-list",5),e.j41(14,"ion-fab",6)(15,"ion-fab-button",7),e.bIt("click",function(){return"recommended"===l.selectedSegment?l.addSchedule():l.individualSchedule()}),e.nrm(16,"ion-icon",8),e.k0s()()()),2&t&&(e.Y8G("translucent",!0),e.R7$(5),e.R50("ngModel",l.selectedSegment),e.R7$(7),e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("ngIf",l.filteredSchedules.length>0))},dependencies:[r.Sq,r.bT,h.BC,h.vS,s.W9,s.Q8,s.YW,s.eU,s.iq,s.uz,s.LU,s.CE,s.A7,s.he,s.nf,s.Gp,s.eP,s.BC,s.ai,s.Je,s.N7,m.Wk],encapsulation:2,changeDetection:0}),a})()},{path:"scheduleDetails",loadChildren:()=>c.e(7749).then(c.bind(c,7749)).then(n=>n.ScheduleDetailsPageModule)},{path:"clinicInventory",loadChildren:()=>c.e(8326).then(c.bind(c,8326)).then(n=>n.ClinicInventoryPageModule)}];let I=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[m.iI.forChild(_),m.iI]}),a})(),j=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[r.MD,h.YN,s.bv,I]}),a})()}}]);
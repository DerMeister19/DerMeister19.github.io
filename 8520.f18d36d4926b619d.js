"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8520],{8520:($,p,c)=>{c.r(p),c.d(p,{InventoryPageModule:()=>A});var h=c(2881),y=c(9417),a=c(3092),g=c(5207),v=c(467),I=c(4208),C=c(1413),f=c(6977),e=c(1360),_=c(4934),b=c(3136);const F=r=>["/inventory",r];function j(r,l){1&r&&(e.j41(0,"ion-title"),e.EFF(1,"Clinic Inventory"),e.k0s())}function R(r,l){if(1&r){const o=e.RV6();e.j41(0,"ion-searchbar",16),e.mxI("ngModelChange",function(t){e.eBV(o);const i=e.XpG();return e.DH7(i.searchQuery,t)||(i.searchQuery=t),e.Njj(t)}),e.bIt("ionInput",function(t){e.eBV(o);const i=e.XpG();return e.Njj(i.search(t))})("ionClear",function(){e.eBV(o);const t=e.XpG();return t.searchQuery="",e.Njj(t.applyFilters())})("ionCancel",function(){e.eBV(o);const t=e.XpG();return t.openSearch=!1,t.searchQuery="",e.Njj(t.applyFilters())}),e.k0s()}if(2&r){const o=e.XpG();e.R50("ngModel",o.searchQuery)}}function S(r,l){if(1&r){const o=e.RV6();e.j41(0,"ion-button",17),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.openSearch=!0)}),e.nrm(1,"ion-icon",18),e.k0s()}}function P(r,l){if(1&r){const o=e.RV6();e.j41(0,"ion-content")(1,"ion-list")(2,"ion-item",19),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.addVaccine())}),e.nrm(3,"ion-icon",20),e.EFF(4," Add Vaccine "),e.k0s(),e.j41(5,"ion-item",19),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.exportAlert())}),e.nrm(6,"ion-icon",21),e.EFF(7," Export Inventory "),e.k0s()()()}2&r&&(e.R7$(2),e.Y8G("button",!0)("detail",!1),e.R7$(3),e.Y8G("button",!0)("detail",!1))}function k(r,l){if(1&r){const o=e.RV6();e.j41(0,"ion-item-sliding")(1,"ion-item",22)(2,"ion-label")(3,"h2"),e.EFF(4,"Trade Name: "),e.j41(5,"strong"),e.EFF(6),e.k0s()(),e.j41(7,"h2"),e.EFF(8,"Name: "),e.j41(9,"strong"),e.EFF(10),e.k0s()(),e.j41(11,"h2"),e.EFF(12,"Manufacturer: "),e.j41(13,"strong"),e.EFF(14),e.k0s()()()(),e.j41(15,"ion-item-options",23)(16,"ion-item-option",24),e.bIt("click",function(){const t=e.eBV(o).$implicit,i=e.XpG();return e.Njj(i.deleteVaccineAlert(t))}),e.nrm(17,"ion-icon",25),e.k0s()()()}if(2&r){const o=l.$implicit,n=e.XpG();e.R7$(),e.Y8G("routerLink",e.eq3(4,F,o.id)),e.R7$(5),e.JRh(o.tradeName),e.R7$(4),e.JRh(n.getVaccineLabel(o)),e.R7$(4),e.JRh(o.manufacturer)}}let N=(()=>{var r;class l{constructor(n,t,i,s,u){this._modalCtrl=n,this._chageDetectorRef=t,this._inventoryService=i,this._uiService=s,this._alertCtrl=u,this.lstInventory=[],this.filterInventory=[],this.currentSegment="all",this.openSearch=!1,this.searchQuery="",this._unsubscribeAll=new C.B}ionViewWillEnter(){this._inventoryService.currentClinicInventory$.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(n=>{this.filterInventory=n,this.applyFilters(),this._chageDetectorRef.markForCheck()})}ionViewWillLeave(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}getVaccineLabel(n){return"all"!==this.currentSegment?n.vaccineName:this.lstInventory.filter(i=>i.vaccineName===n.vaccineName).length>1?`${n.vaccineName}${"pediatric"===n.section?" (Peds)":"adult"===n.section?" (Adult)":" (Other)"}`:n.vaccineName}search(n){this.searchQuery=String(n.detail.value).toLowerCase().trim(),this.applyFilters()}applyFilters(){var n;const t=(null===(n=this.searchQuery)||void 0===n?void 0:n.toLowerCase().trim())||"",i=this.currentSegment;this.lstInventory=this.filterInventory.filter(s=>("all"===i||s.section===i)&&(!t||s.vaccineName.toLowerCase().includes(t)||s.tradeName.toLowerCase().includes(t))),this._chageDetectorRef.markForCheck()}addVaccine(){var n=this;return(0,v.A)(function*(){const t=yield n._modalCtrl.create({component:I.J}),{data:i}=yield t.present().then(()=>t.onWillDismiss());i&&n.vaccineAlert(i)})()}vaccineAlert(n){var t=this;return(0,v.A)(function*(){(yield t._alertCtrl.create({header:"Add vaccine",message:`Add ${n.vaccineName}, ${n.tradeName} to clinic inventory`,inputs:[{label:"Adult",type:"radio",value:"adult",checked:!0},{label:"Pediatric",type:"radio",value:"pediatric"},{label:"Uncategorized",type:"radio",value:"uncategorized"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Add",handler:s=>{n.section=s,t._inventoryService.addVaccineClinicInventory(n).subscribe(u=>{if(t._uiService.toast(n.isCombination?`Vaccine ${n.vaccineName} added`:`Vaccine ${n.tradeName} added`),null!=u&&u.id){const d={...n,id:u.id};t._inventoryService.setCurrentClinicInventory([...t._inventoryService.currentClinicInventorySubject.value,d]),t._chageDetectorRef.markForCheck()}})}}]})).present()})()}deleteVaccineAlert(n){var t=this;return(0,v.A)(function*(){(yield t._alertCtrl.create({header:"Remove vaccine",message:`Remove ${n.vaccineName}, ${n.tradeName} from clinic inventory`,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Delete",handler:()=>{t._inventoryService.deleteVaccineClinicInventory(n.id).subscribe(s=>{t._inventoryService.getClinicInventory().subscribe(u=>{t._inventoryService.setCurrentClinicInventory(u.vaccines)}),t._uiService.toast(s.message),t._chageDetectorRef.markForCheck()})}}]})).present()})()}exportAlert(){var n=this;return(0,v.A)(function*(){(yield n._alertCtrl.create({header:"Export inventory",message:"Create file",inputs:[{type:"radio",name:"file",label:"Excel",value:"e",checked:!0},{type:"radio",name:"file",label:"Word",value:"d"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Create",handler:i=>{n._inventoryService.clinicInventoryExport(i,n.currentSegment).pipe((0,f.Q)(n._unsubscribeAll)).subscribe(s=>{let u="d"!=i?"xlsx":"docx";const m=window.URL.createObjectURL(s),d=document.createElement("a");d.href=m,d.download=`ClinicInventory.${u}`,d.click(),window.URL.revokeObjectURL(m),n._uiService.toast("File exported successfully"),n._chageDetectorRef.markForCheck()})}}]})).present()})()}orderVaccines(){}}return(r=l).\u0275fac=function(n){return new(n||r)(e.rXU(a.W3),e.rXU(e.gRc),e.rXU(_.c),e.rXU(b.o),e.rXU(a.hG))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-inventory"]],standalone:!1,decls:24,vars:8,consts:[[3,"translucent"],[4,"ngIf"],["show-cancel-button","always","show-clear-button","focus",3,"ngModel","ngModelChange","ionInput","ionClear","ionCancel",4,"ngIf"],["slot","start"],[3,"click",4,"ngIf"],["slot","end"],["id","popover-button"],["name","ellipsis-vertical","color","primary","slot","icon-only"],["trigger","popover-button",3,"dismissOnSelect"],[3,"ngModelChange","ionChange","ngModel"],["value","all"],["value","adult"],["value","pediatric"],["value","uncategorized"],[3,"fullscreen"],[4,"ngFor","ngForOf"],["show-cancel-button","always","show-clear-button","focus",3,"ngModelChange","ionInput","ionClear","ionCancel","ngModel"],[3,"click"],["name","search","slot","icon-only","color","primary"],[3,"click","button","detail"],["name","add","slot","start","color","primary"],["name","cloud-upload","slot","start","color","primary"],["lines","full","detail","true","button","true",3,"routerLink"],["side","start"],["color","danger",3,"click"],["slot","icon-only","name","trash"]],template:function(n,t){1&n&&(e.j41(0,"ion-header",0)(1,"ion-toolbar"),e.DNE(2,j,2,0,"ion-title",1)(3,R,1,1,"ion-searchbar",2),e.j41(4,"ion-buttons",3),e.DNE(5,S,2,0,"ion-button",4),e.k0s(),e.j41(6,"ion-buttons",5)(7,"ion-button",6),e.nrm(8,"ion-icon",7),e.k0s()(),e.j41(9,"ion-popover",8),e.DNE(10,P,8,4,"ng-template"),e.k0s()(),e.j41(11,"ion-toolbar")(12,"ion-segment",9),e.mxI("ngModelChange",function(s){return e.DH7(t.currentSegment,s)||(t.currentSegment=s),s}),e.bIt("ionChange",function(){return t.applyFilters()}),e.j41(13,"ion-segment-button",10),e.EFF(14,"All"),e.k0s(),e.j41(15,"ion-segment-button",11),e.EFF(16,"Adult"),e.k0s(),e.j41(17,"ion-segment-button",12),e.EFF(18,"Pediatric"),e.k0s(),e.j41(19,"ion-segment-button",13),e.EFF(20,"Uncategorized"),e.k0s()()()(),e.j41(21,"ion-content",14)(22,"ion-list"),e.DNE(23,k,18,6,"ion-item-sliding",15),e.k0s()()),2&n&&(e.Y8G("translucent",!0),e.R7$(2),e.Y8G("ngIf",!t.openSearch),e.R7$(),e.Y8G("ngIf",t.openSearch),e.R7$(2),e.Y8G("ngIf",!t.openSearch),e.R7$(4),e.Y8G("dismissOnSelect",!0),e.R7$(3),e.R50("ngModel",t.currentSegment),e.R7$(9),e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("ngForOf",t.lstInventory))},dependencies:[h.Sq,h.bT,y.BC,y.vS,a.Jm,a.QW,a.W9,a.eU,a.iq,a.uz,a.LU,a.CE,a.A7,a.he,a.nf,a.S1,a.Gp,a.eP,a.BC,a.ai,a.CF,a.Je,a.Gw,a.N7,g.Wk],encapsulation:2,changeDetection:0}),l})();var V=c(8141);const G=[{path:"",resolve:{InventoryResolver:(()=>{var r;class l{constructor(n){this._inventoryService=n}resolve(n,t){return this._inventoryService.getClinicInventory().pipe((0,V.M)(i=>this._inventoryService.setCurrentClinicInventory(i.vaccines)))}}return(r=l).\u0275fac=function(n){return new(n||r)(e.KVO(_.c))},r.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),l})()},component:N},{path:"fda",loadComponent:()=>c.e(3996).then(c.bind(c,3996)).then(r=>r.FdaPageModule)},{path:":id",loadChildren:()=>c.e(3355).then(c.bind(c,3355)).then(r=>r.ItemDetailsPageModule)}];let M=(()=>{var r;class l{}return(r=l).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[g.iI.forChild(G),g.iI]}),l})(),A=(()=>{var r;class l{}return(r=l).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[h.MD,y.YN,a.bv,M]}),l})()}}]);